{% extends "GestionPfeBundle::layout.html.twig" %}

{% block title %} <title>Ma Resume</title>{% endblock title %}

{% block body %}
    <div class="page-banner-area"
         style="background-image: url(/gestionpfe/web/Client/img/page-banner/page-banner.jpg);">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="page-content">
                        <!-- Section Title -->
                        <div class="section-title alt-sec-title">
                            <h2>Resume {{ app.getUser().getNom() }} {{ app.getUser().getPrenom() }}</h2>
                            <p>Enrechissez votre Resumé Personnel pour avoir une chance a avoir un stage pfe !</p>
                        </div>
                        <!-- Page breadcrumb -->
                        <div class="page-breadcrumb">
                            <ul>
                                <li><a href="{{ path('fos_user_profile_show') }}">Profil</a></li>
                                <li><a class="not-active" href="{{ path('_afficheform_cv') }} "> Resume Personnel</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="resume">
        <header class="page-header">
            <small><i class="fa fa-clock-o"></i>derniere modification:
                <time>Sunday, fevrier , 11</time>
            </small>
            <br>

            <table>
                <thead>
                <tr>

                    <button class="btn btn-danger btn-xs">
                        <a  href="{{ path('_modifier_cv', {'id':cv.id}) }}">
                        <i class="fa fa-trash-o "></i>
                        </a>
                    </button>
                    <button  class="theme-btn hvr-shutter-in-horizontal" style="float: right" aria-label="Retour">
                        <a href="{{ path('gestion_pfe_homepage') }}">
                            <i class="fa fa-graduation-cap"></i> </a>
                    </button>
                </tr>

                </thead>

            </table>
        </header>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-offset-1 col-md-10 col-lg-offset-2 col-lg-8">
                <div class="panel panel-default">
                    <div class="panel-heading resume-heading">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="col-xs-12 col-sm-4">
                                    <figure>
                                        <img class="img-circle img-responsive" alt=""
                                             src="{{ asset('uploads/user/'~app.getUser.getImage()) }}">
                                    </figure>

                                    <div class="row">
                                        <div class="col-xs-12 social-btns">

                                            <div class="col-xs-3 col-md-1 col-lg-1 social-btn-holder">
                                                <a href="#" class="btn btn-social btn-block btn-google">
                                                    <i class="fa fa-google"></i> </a>
                                            </div>

                                            <div class="col-xs-3 col-md-1 col-lg-1 social-btn-holder">
                                                <a href="#" class="btn btn-social btn-block btn-facebook">
                                                    <i class="fa fa-facebook"></i> </a>
                                            </div>

                                            <div class="col-xs-3 col-md-1 col-lg-1 social-btn-holder">
                                                <a href="#" class="btn btn-social btn-block btn-twitter">
                                                    <i class="fa fa-twitter"></i> </a>
                                            </div>

                                            <div class="col-xs-3 col-md-1 col-lg-1 social-btn-holder">
                                                <a href="#" class="btn btn-social btn-block btn-linkedin">
                                                    <i class="fa fa-linkedin"></i> </a>
                                            </div>

                                            <div class="col-xs-3 col-md-1 col-lg-1 social-btn-holder">
                                                <a href="#" class="btn btn-social btn-block btn-github">
                                                    <i class="fa fa-github"></i> </a>
                                            </div>

                                            <div class="col-xs-3 col-md-1 col-lg-1 social-btn-holder">
                                                <a href="#" class="btn btn-social btn-block btn-stackoverflow">
                                                    <i class="fa fa-stack-overflow"></i> </a>
                                            </div>

                                        </div>
                                    </div>

                                </div>

                                <div class="col-xs-12 col-sm-8">
                                    <ul class="list-group">
                                        <li class="list-group-item">
                                            <span>{{ app.getUser().getNom() }} {{ app.getUser().getPrenom() }}</span>
                                        </li>
                                        <li class="list-group-item">Ingenieur Genie Logiciels</li>
                                        <li class="list-group-item">Esprit</li>
                                        <li class="list-group-item"><i class="fa fa-phone"></i>
                                            +216 {{ app.getUser().getNumeroTel() }}</li>
                                        <li class="list-group-item"><i
                                                    class="fa fa-envelope"></i> {{ app.getUser().getEmail() }}</li>
                                        <li class="list-group-item"><i
                                                    class="fa fa-address-book"></i> {{ app.getUser().getRue() }}</li>
                                        <li class="list-group-item"><i
                                                    class="fa fa-envelope"></i> {{ app.getUser().getCodePostal() }}</li>
                                        <li class="list-group-item"><i
                                                    class="fa fa-address-book"></i> {{ app.getUser().getVille() }}
                                            ,Tunisie
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bs-callout bs-callout-danger">
                        <h4>A propos de moi</h4>
                        <p>
                            je cherche un stage
                        </p>
                    </div>
                    <div class="bs-callout bs-callout-danger">
                        <h4>Formations</h4>
                        <table class="table table-striped table-responsive ">
                            <thead>
                            <tr>
                                <th>Formation</th>
                                <th> année d'obtention du diplôme</th>

                            </tr>
                            </thead>
                            <tbody id="formRow">
                            <button class="btn btn-success " type="button" onclick="ajoutFormation()"
                                    style="float: right">
                                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>
                            {% for f in formation %}
                                <tr>

                                    <td id="f{{ f.id }}">{{ f.formation }}</td>
                                    <td id="a{{ f.id }}">{{ f.annee }}</td>
                                    <td><a type="button" onclick="updateFormation({{ f.id }});"
                                           class="btn btn-primary btn-xs">
                                            <i class="fa fa-pencil"></i>
                                        </a>
                                    </td>

                                </tr>
                            {% endfor %}

                            </tbody>
                        </table>
                    </div>
                    <div class="bs-callout bs-callout-danger">
                        <h4>Languages et Framework maitrisés</h4>

                        <ul class="list-group" id="techRow">
                            <li style="padding-bottom: 80px">
                                <button class="btn btn-success " type="button" onclick="ajoutTech()"
                                        style="float: right">
                                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>
                            </li>

                            {% for t in tech %}

                                {% if t.level=='pauvre' %}
                                    <div class="progress" id="t{{ t.id }}">
                                        <div data-placement="top" style="width: 20%;"
                                             aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar"
                                             class="progress-bar progress-bar-danger">

                                            <span class="progress-type" id="{{ t.id }}">{{ t.competence }}</span>

                                        </div>
                                        <a type="button" onclick="updatetech({{ t.id }});"
                                           class="btn btn-primary btn-xs">
                                            <i class="fa fa-pencil"></i>
                                        </a>

                                    </div>
                                {% elseif t.level=='peu de connaissance' %}
                                    <div class="progress" id="t{{ t.id }}">
                                        <div data-placement="top" style="width: 50%;" aria-valuemax="100"
                                             aria-valuemin="0" aria-valuenow="40" role="progressbar"
                                             class="progress-bar progress-bar-warning">

                                            <span class="progress-type" id="{{ t.id }}">{{ t.competence }}</span>

                                        </div>
                                        <a type="button" onclick="updatetech({{ t.id }});"
                                           class="btn btn-primary btn-xs">
                                            <i class="fa fa-pencil"></i>
                                        </a>

                                    </div>
                                {% elseif t.level=='excellent' %}
                                    <div class="progress" id="t{{ t.id }}">
                                        <div data-placement="top" style="width: 97%;"
                                             aria-valuemax="100" aria-valuemin="0" aria-valuenow="100"
                                             role="progressbar" class="progress-bar progress-bar-success">

                                            <span class="progress-type" id="{{ t.id }}">{{ t.competence }}</span>

                                        </div>
                                        <a type="button" onclick="updatetech({{ t.id }});"
                                           class="btn btn-primary btn-xs">
                                            <i class="fa fa-pencil"></i>
                                        </a>

                                    </div>
                                {% elseif t.level=='bien' %}
                                    <div class="progress" id="t{{ t.id }}">
                                        <div data-placement="top" style="width: 72%;"
                                             aria-valuemax="100" aria-valuemin="0" aria-valuenow="80" role="progressbar"
                                             class="progress-bar progress-bar-success">

                                            <span class="progress-type" id="{{ t.id }}">{{ t.competence }}</span>

                                        </div>
                                        <a type="button" onclick="updatetech({{ t.id }});"
                                           class="btn btn-primary btn-xs">
                                            <i class="fa fa-pencil"></i>
                                        </a>

                                    </div>
                                {% else %}
                                    <div class="progress" id="t{{ t.id }}">
                                        <div data-placement="top" style="width: 10%;"
                                             aria-valuemax="100" aria-valuemin="0" aria-valuenow="10" role="progressbar"
                                             class="progress-bar progress-bar-danger">

                                            <span class="progress-type" id="{{ t.id }}">{{ t.competence }}</span>

                                        </div>
                                        <a type="button" onclick="updatetech({{ t.id }});"
                                           class="btn btn-primary btn-xs">
                                            <i class="fa fa-pencil"></i>
                                        </a>

                                    </div>

                                {% endif %}

                            {% endfor %}


                        </ul>
                        <div class="progress-meter">
                            <div style="width: 25%;" class="meter meter-left">
                                <span class="meter-text">Je suis Faible</span>
                            </div>
                            <div style="width: 25%;" class="meter meter-left">
                                <span class="meter-text">J'ai un peu de connaissance</span>
                            </div>

                            <div style="width: 20%;" class="meter meter-right">
                                <span class="meter-text">Je suis excellent</span>
                            </div>
                            <div style="width: 30%;" class="meter meter-right">
                                <span class="meter-text">Je suis bien</span>
                            </div>

                        </div>
                    </div>
                    <div class="bs-callout bs-callout-danger">
                        <h4>Langues</h4>


                        <table class="table table-striped table-responsive ">
                            <thead>
                            <tr>
                                <th>Langue</th>
                                <th>niveau</th>
                                <th></th>

                            </tr>
                            </thead>
                            <tbody id="langRow">
                            <button class="btn btn-success " id="idal" type="button" onclick="ajoutlangue()"
                                    style="float: right">
                                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>
                            {% for l in langue %}
                                <tr>

                                    <td id="l{{ l.id }}">{{ l.langue }}</td>
                                    <td id="n{{ l.id }}">{{ l.niveau }}</td>
                                    <td><a type="button" onclick="updatelangue({{ l.id }});"
                                           class="btn btn-primary btn-xs">
                                            <i class="fa fa-pencil"></i>
                                        </a>
                                    </td>

                                </tr>
                            {% endfor %}
                            </tbody>

                        </table>

                    </div>
                    <div class="bs-callout bs-callout-danger">
                        <h4>Centres d'interets</h4>
                        <button class="btn btn-success " type="button" onclick="ajoutcentre()" style="float: right">
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>
                        <ul class="list-group" id="centres">
                            {% for c in centre %}
                                <li style="padding-bottom: 10px" id="c{{ c.id }}">{{ c.centreInteret }}
                                    <a style="margin-left: 10px" id="pen{{ c.id }}" type="button"
                                       onclick="updatecentre({{ c.id }})" class="btn btn-primary btn-xs">
                                        <i class="fa fa-pencil"></i>
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                <input hidden id="cv" value="{{ cv.id }}">
            </div>
        </div>
    </div>
    <div class="modal" id="myModal" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Choisir une Langue</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div style="margin-bottom: 10px">
                            <select class="form-control" id="langue">

                                <optgroup label="Langues">
                                    <option value="Arabe">Arabe</option>
                                    <option value="Francais">Francais</option>
                                    <option value="Allmend">Allmend</option>
                                    <option value="Chinois">Chinois</option>
                                    <option value="Japonnais">Japonnais</option>
                                    <option value="Anglais">Anglais</option>
                                </optgroup>

                            </select>

                        </div>
                        <div style="margin-bottom: 10px">
                            <select class="form-control" id="niveau">

                                <optgroup label="Niveau">
                                    <option value="A1">A1</option>
                                    <option value="A2">A2</option>
                                    <option value="B1">B1</option>
                                    <option value="B2">B2</option>
                                    <option value="C1">C1</option>
                                    <option value="C2">C2</option>
                                </optgroup>

                            </select>

                        </div>
                        <div class="col">
                            <button type="button" class="btn btn-info" id="ok" onclick="confirmlangue()">Confirmer
                            </button>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="Modala" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Choisir une Langue</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col" style="margin-bottom: 10px">
                            <select class="form-control" id="la">

                                <optgroup label="Langues">
                                    <option value="Arabe">Arabe</option>
                                    <option value="Francais">Francais</option>
                                    <option value="Allmend">Allmend</option>
                                    <option value="Chinois">Chinois</option>
                                    <option value="Japonnais">Japonnais</option>
                                    <option value="Anglais">Anglais</option>
                                </optgroup>

                            </select>

                        </div>
                        <div style="margin-bottom: 10px">
                            <select class="form-control" id="niv">

                                <optgroup label="Niveau">
                                    <option value="A1">A1</option>
                                    <option value="A2">A2</option>
                                    <option value="B1">B1</option>
                                    <option value="B2">B2</option>
                                    <option value="C1">C1</option>
                                    <option value="C2">C2</option>
                                </optgroup>

                            </select>

                        </div>
                        <div class="col">
                            <button type="button" class="btn btn-info" id="ok" onclick="confirmajout()">Confirmer
                            </button>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="myFormation" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Ajouter une formation</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div style="margin-bottom: 10px">
                            <input type="text" class="form-control" id="Formation" placeholder="Saisir une formation" >

                        </div>
                        <div style="margin-bottom: 10px">
                            <input type="date" class="form-control" id="annee" >

                        </div>
                        <div class="col">
                            <button type="button" class="btn btn-info" id="ok" onclick="confirmFormation()">Confirmer
                            </button>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="addFormation" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Choisir une Formation</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col" style="margin-bottom: 10px">
                            <input type="text" class="form-control" placeholder="saisir une formation" id="fo" >
                        </div>
                        <div style="margin-bottom: 10px">
                            <input type="date" class="form-control" id="an" >

                        </div>
                        <div class="col">
                            <button type="button" class="btn btn-info" id="ok" onclick="confirmajoutFormation()">
                                Confirmer
                            </button>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="myCompetence" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Choisir une Competence</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div style="margin-bottom: 10px">
                            <input class="form-control" id="technology1" placeholder="competence.." autocomplete="on" >
                        </div>
                        <div style="margin-bottom: 10px">
                            <select class="form-control" id="level1">

                                <optgroup label="Niveau">
                                    <option value="pauvre">pauvre</option>
                                    <option value="peu de connaissance">peu de connaissance</option>
                                    <option value="bien">bien</option>
                                    <option value="excellent">excellent</option>
                                </optgroup>

                            </select>

                        </div>
                        <div class="col">
                            <button type="button" class="btn btn-info" id="ok" onclick="confirmtech()">Confirmer
                            </button>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="addCompetence" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Choisir une Competence</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div style="margin-bottom: 10px">
                            <input class="form-control" id="tech" placeholder="competence.." autocomplete="on" >


                        </div>
                        <div style="margin-bottom: 10px">
                            <select class="form-control" id="level">

                                <optgroup label="Niveau">
                                    <option value="pauvre">pauvre</option>
                                    <option value="peu de connaissance">peu de connaissance</option>
                                    <option value="bien">bien</option>
                                    <option value="excellent">excellent</option>
                                </optgroup>

                            </select>

                        </div>

                        <div class="col">
                            <button type="button" class="btn btn-info" id="ok" onclick="confirmajoutTech()">Confirmer
                            </button>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="myCentre" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Choisir un centre d'interet</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div style="margin-bottom: 10px">
                            <select class="form-control" id="centreModifier">


                                <optgroup label="Centres d'interets">
                                    <option value="Activité sportive collective">Activité sportive collective</option>
                                    <option value="Activité artistique">Activité artistique</option>
                                    <option value="Activité culturelle">Activité culturelle</option>
                                    <option value="Activité musicale">Activité musicale</option>
                                </optgroup>

                            </select>

                        </div>
                        <div class="col">
                            <button type="button" class="btn btn-info" id="ok" onclick="confirmcentre()">Confirmer
                            </button>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>



    <div class="modal" id="addCentre" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Choisir une Langue</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col" style="margin-bottom: 10px">
                            <select class="form-control" id="centreajouter">


                                <optgroup label="Centres d'interets">
                                    <option value="Activité sportive collective">Activité sportive collective</option>
                                    <option value="Activité artistique">Activité artistique</option>
                                    <option value="Activité culturelle">Activité culturelle</option>
                                    <option value="Activité musicale">Activité musicale</option>
                                </optgroup>

                            </select>

                        </div>
                        <div class="col">
                            <button type="button" class="btn btn-info" id="ok" onclick="confirmajoutcentre()">
                                Confirmer
                            </button>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script src="{{ asset('Client/js/jqueryf.js') }}"></script>
    <script src="{{ asset('Client/js/sweetalert2.all.min.js') }}"></script>
    <link rel="stylesheet" href="{{ asset('Client/css/jquery-ui.css') }}">
    <script src="{{ asset('Client/js/jquery-ui.js') }}"></script>
    <style>

        .ui-autocomplete {
            z-index: 100000000000000000000 !important;
        }

        .modal-content {
            margin-top: 80%;
            padding: 1em 1em 1em 1em;
            z-index: 10000000000 !important;
        }

        .modal-content .modal-body #ok {
            margin-top: 1em;
        }
    </style>
    <script type="text/javascript">

        $(document).ready(function () {
            initAutoComplete();
        })

        var idl = 0;
        var idf = 0;
        var idc = 0;
        var idt = 0;

        //langue
        function updatelangue(id) {

            idl = id;
            $('#myModal').modal('show');

        }//end langue

        function confirmlangue() {

            obj = new Object();
            obj["langue"] = $('#langue').find(":selected").val();
            obj["niveau"] = $('#niveau').find(":selected").val();
            obj['idl'] = idl;

            $.ajax({
                type: "POST",
                url: "{{ path('_modifier_langue') }}",
                data: obj,
                dataType: "json",
                success: function (response) {

                }


            });
            $('#myModal').modal('hide');
            swal(
                'succès!',
                'Operation Terminé !',
                'success'
            )
            $('#idl').remove();

            document.getElementById('l' + idl).innerHTML = obj["langue"];
            document.getElementById('n' + idl).innerHTML = obj["niveau"];


        }

        function ajoutlangue() {
            $('#Modala').modal('show');

        }

        function confirmajout() {
            obj = new Object();
            obj["langue"] = $('#la').find(":selected").val();
            obj["niveau"] = $('#niv').find(":selected").val();
            obj["idcv"] = $('#cv').val();


            $.ajax({
                type: "POST",
                url: "{{ path('ajout_langue') }}",
                data: obj,
                dataType: "json",
                success: function (response) {

                    $('#Modala').modal('hide');
                    swal(
                        'succès!',
                        'Operation Terminé !',
                        'success'
                    )
                    $('#langRow').append('<tr><td id='+'l'+response+'>'+obj["langue"]+'</td><td id='+'n'+response+'>'+obj["niveau"]+'</td><td><a type="button" onclick="updatelangue('+response+')" class="btn btn-primary btn-xs"> <i class="fa fa-pencil"></i> </a></td></tr>');

                }


            });


        }

        //formation
        function updateFormation(id) {

            idf = id;
            $('#myFormation').modal('show');

        }

        function confirmFormation() {

            obj = new Object();
            obj["formation"] = $('#Formation').val();
            obj["annee"] = $('#annee').val();
            obj['idf'] = idf;

            $.ajax({
                type: "POST",
                url: "{{ path('modifier_formation') }}",
                data: obj,
                dataType: "json",
                success: function (response) {

                }


            });
            $('#myFormation').modal('hide');


            //var objTo = document.getElementById('#idl');

            swal(
                'succès!',
                'Operation Terminé !',
                'success'
            )
            document.getElementById('f'+idf).innerHTML = obj["formation"];
            document.getElementById('a'+idf).innerHTML = obj["annee"];

        }

        function ajoutFormation() {
            $('#addFormation').modal('show');

        }

        function confirmajoutFormation() {
            obj = new Object();
            obj["formation"] = $('#fo').val();
            obj["annee"] = $('#an').val();
            obj["idcv"] = $('#cv').val();


            $.ajax({
                type: "POST",
                url: "{{ path('ajout_formation') }}",
                data: obj,
                dataType: "json",
                success: function (response) {

                    $('#addFormation').modal('hide');
                    swal(
                        'succès!',
                        'Operation Terminé !',
                        'success'
                    )
                    $('#formRow').append('<tr><td id=' + 'f' + response + '>' + obj["formation"] + '</td><td id=' + 'a' + response + '>' + obj["annee"] + '</td><td><a type="button" onclick="updateFormation(' + response + ')" class="btn btn-primary btn-xs"> <i class="fa fa-pencil"></i> </a></td></tr>');

                }


            });


        }

        //endFormation
        //competences
        function updatetech(id) {

            idt = id;
            $('#myCompetence').modal('show');
            initAutoComplete1();

        }

        function confirmtech() {

            obj = new Object();
            obj["competence"] = $('#technology1').val();
            obj["level"] = $('#level1').find(":selected").val();
            obj['idt'] = idt;


            $.ajax({
                type: "POST",
                url: "{{ path('modifier_competence') }}",
                data: obj,
                dataType: "json",
                success: function (response) {

                }


            });
            $('#myCompetence').modal('hide');
            swal(
                'succès!',
                'Operation Terminé !',
                'success'
            )
            if (obj['level'] == "pauvre") {


                document.getElementById('t' + idt).innerHTML = ('<div class="progress" id="t'+idt+'"><div data-placement="top" style="width: 10%;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar" class="progress-bar progress-bar-danger"><span class="progress-type" id="'+idt+'">'+obj["competence"]+'</span></div><a type="button" onclick="updatetech('+idt+');" class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></a></div>')
            }
            else if (obj['level'] == "peu de connaissance") {
                document.getElementById('t' + idt).innerHTML = ('<div class="progress" id="t'+idt+'"><div data-placement="top" style="width: 50%;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar" class="progress-bar progress-bar-warning"><span class="progress-type" id="'+idt+'">'+obj["competence"]+'</span></div><a type="button" onclick="updatetech('+idt+');" class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></a></div>')
            }

            else if (obj['level'] == "bien") {
                document.getElementById('t' + idt).innerHTML = ('<div class="progress" id="t'+idt+'"><div data-placement="top" style="width: 72%;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar" class="progress-bar progress-bar-success"><span class="progress-type" id="'+idt+'">'+obj["competence"]+'</span></div><a type="button" onclick="updatetech('+idt+');" class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></a></div>')
            }
            else if (obj['level'] == "excellent") {
                document.getElementById('t' + idt).innerHTML = ('<div class="progress" id="t'+idt+'"><div data-placement="top" style="width: 97%;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar" class="progress-bar progress-bar-success"><span class="progress-type" id="'+idt+'">'+obj["competence"]+'</span></div><a type="button" onclick="updatetech('+idt+');" class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></a></div>')
            }
            else
                alert("obligé");

        }

        function ajoutTech() {

            $('#addCompetence').modal('show');
            initAutoComplete();
        }

        function confirmajoutTech() {
            obj = new Object();

            obj["technologie"] = $('#tech').val();
            obj["level"] = $('#level').find(":selected").val();
            obj["idcv"] = $('#cv').val();


            $.ajax({
                type: "POST",
                url: "{{ path('ajout_competence') }}",
                data: obj,
                dataType: "json",
                success: function (response) {

                    $('#addCompetence').modal('hide');
                    swal(
                        'succès!',
                        'Operation Terminé !',
                        'success'
                    )

                    if (obj['level'] == "pauvre") {


                        $('#techRow').append('<div class="progress" id="t' + response + '"><div data-placement="top" style="width: 10%;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar" class="progress-bar progress-bar-danger"><span class="progress-type" id="' + response + '">' + obj["technologie"] + '</span></div><a type="button" onclick="updatetech('+response+');" class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></a></div>')
                    }
                    else if (obj['level'] == "peu de connaissance") {
                        $('#techRow').append('<div class="progress" id="t' + response + '"><div data-placement="top" style="width: 50%;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar" class="progress-bar progress-bar-warning"><span class="progress-type" id="' + response + '">' + obj["technologie"] + '</span></div><a type="button" onclick="updatetech('+response+');" class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></a></div>')
                    }

                    else if (obj['level'] == "bien") {
                        $('#techRow').append('<div class="progress" id="t' + response + '"><div data-placement="top" style="width: 72%;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar" class="progress-bar progress-bar-success"><span class="progress-type" id="' + response + '">' + obj["technologie"] + '</span></div><a type="button" onclick="updatetech('+response+');" class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></a></div>')
                    }
                    else if (obj['level'] == "excellent") {
                        $('#techRow').append('<div class="progress" id="t' + response + '"><div data-placement="top" style="width: 97%;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar" class="progress-bar progress-bar-success"><span class="progress-type" id="' + response + '">' + obj["technologie"] + '</span></div><a type="button" onclick="updatetech('+response+');" class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></a></div>')
                    }
                    else
                        alert("obligé");
                }


            });


        }

        //endCompetence

        //centres
        function updatecentre(id) {

            idc = id;
            $('#myCentre').modal('show');


        }

        function confirmcentre() {

            obj = new Object();
            obj["centre"] = $('#centreModifier').find(":selected").val();
            obj['idc'] = idc;

            $.ajax({
                type: "POST",
                url: "{{ path('modifier_centre') }}",
                data: obj,
                dataType: "json",
                success: function (response) {

                }


            });
            $('#myCentre').modal('hide');
            swal(
                'succès!',
                'Operation Terminé !',
                'success'
            )

            $('#idc').remove();

            document.getElementById('c' + idc).innerHTML = ('<li style="padding-bottom: 10px" id="c' + idc + '">' + obj["centre"] + '<a style="margin-left: 10px" type="button" onclick="updatecentre(idc)" id="pen' + idc + '" class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></a></li>')


        }

        function ajoutcentre() {
            $('#addCentre').modal('show');

        }

        function confirmajoutcentre() {
            obj = new Object();
            obj["centre"] = $('#centreajouter').find(":selected").val();
            obj["idcv"] = $('#cv').val();
            $.ajax({
                type: "POST",
                url: "{{ path('ajout_centre') }}",
                data: obj,
                dataType: "json",
                success: function (response) {

                    $('#addCentre').modal('hide');
                    swal(
                        'succès!',
                        'Operation Terminé !',
                        'success'
                    )
                    $('#centres').append('<li style="padding-bottom: 10px" id="c' + response + '">' + obj["centre"] + '<a style="margin-left: 10px" type="button" onclick="updatecentre(' + response + ')" id="pen' + response + '" class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></a></li>');

                },


            });


        }

        //endCentres

        function initAutoComplete() {
            var availableTags = [
                "ActionScript",
                "AppleScript",
                "Asp",
                "BASIC",
                "C",
                "C++",
                "Clojure",
                "COBOL",
                "ColdFusion",
                "Erlang",
                "Fortran",
                "Groovy",
                "Haskell",
                "Java",
                "JavaScript",
                "Lisp",
                "Perl",
                "PHP",
                "Python",
                "Ruby",
                "Scala",
                "Scheme"
            ];
            $("#tech").autocomplete({
                source: availableTags
            });
        }

        function initAutoComplete1() {
            var availableTags = [
                "ActionScript",
                "AppleScript",
                "Asp",
                "BASIC",
                "C",
                "C++",
                "Clojure",
                "COBOL",
                "ColdFusion",
                "Erlang",
                "Fortran",
                "Groovy",
                "Haskell",
                "Java",
                "JavaScript",
                "Lisp",
                "Perl",
                "PHP",
                "Python",
                "Ruby",
                "Scala",
                "Scheme"
            ];
            $("#technology1").autocomplete({
                source: availableTags
            });
        }

    </script>

{% endblock %}
